{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/Linux-kernelのMakefileを雰囲気で読んだ話/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://sititou70.github.io"}},"markdownRemark":{"excerpt":"この記事は，「カーネルビルドでも進捗が見たい！」に入り切らなかった蛇足です． kbuild-progressの実装を初めた当初は，kernelのMakefileを改造することで，プログレスバーを表示しようとしていました．Linux kernelのビルドシステムであるKbuildはmake…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 257px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb898da1f01ea996110d61a3ad3ceb7b/e55ce/top.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 121.01167315175098%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEFElEQVR42o2UfUwTZxzHb5QwXZaYsAgj7g/GIpjBJtswYrZsEhIdRjeRrkGERtw0q+IyJi/iKK5byksFCoH4BhU3ZhBlIAVUOktxgEpFXsS2CGtLaXuFrqWUux731j670gQWyAKXuyf3PM/383x/9zzfHAT+9/LY7TaDwYBhmLfj8axWQCuJRRGCojKZrK1NevvWrdycnC65nBl0u93rgqXS1vLy8rq6uvr6+pKSkqjISKPRuJqHVpMoiiQnJ3M4nJTDyWlpaSkpKSwWSyKRMFMURa0BMyZHUg6f4xcEbg5pbm0rKOBDEJSfn89MkSS5BmyB4e8zs2pL+JIfU4tyT1VXVjNwxqmT63K22udLMz61tnDAc5H1Rpyi7GMvnHF6XfCEFr6eEwYGNuKP/IEywNr+3mv+ryQk7Ftjw3wLV1dXJX15EMBV+PBOQidGrFMfRkcz5kqlcgUPrTxhBIkIDy8W/kLi9IzJOm22IXargH+WgdnspBWBgZZI35BIJAoOCurtlluMuoE+xU3JlT/b22qrKoODNgcGBpaVljLalc6+Ynp7eqKiorhcrtPpdGELT7ofSsTi9pY73Q8e7IuPfzMkJCYmRqHoWtJDS2UwAI/HCw0NZYKJoqhjbu73Sxfbm5oklRW1FRXlhUUR27YxUUtPT8dx3EdBS8vcv3c3Pm73V2z21KQeNhn/sc4o7naIBYLivLxvExMbaq4eSPg8dteusLdDh4eHfJQXpmmaaTN/yIr9JK7m8kWTftykm4AN2mmTvkva3NnU2Hj1UmnB+Z9zc45/c8zPjyWVSn3UsnN94ensA+82N/yK2c2wVgVrNRadehbWz1r0THtblM07cTyJw9kRGfak9+Ey7A3tmJzqvQBU10SpHwgK+JTNYJ9UzxrUdv0L26TGMa5EpJn7P9seERFVzGNbu64sfvNi2ZhciDWfwIdv0uo/5u5kbNkI8c/lAOcUatZg5jFsRoeMyhakPEzBv3fh6zJBYeWZow6rzbvbHsqz0JqId+wn+sowhRD0C3/jRadykgBixC0a0qIGqIV82Yne2EN1HgI9u5sFW7PZocY+8SJMAKp/L/2XP6n4iJCzcRmXaj04KytGp7UAMwNkSjc6MHid5+l4i+h6g+7fQKtYLiVEjWZ4Ydq1QCq3g1EIDPmBIYh+vAk83qK9HPx++DupyYfYX+wNCNjUmP06ePEqPeIH/obIwa0uVQ2BYovOACxYNE5VreNZvku5kx5mgUHI3BKbd/LoT2e4RWePnc/6TtOwB4xBngkIU+6YVj2bcxIURS7Hk3QDFKEdsMUxdt8+2mB4/gjWjpjGn5pePmVezJr++RGhS10+bzHiBOGhif9k2xtPty/xzMMkhnbTBM7IcNJ7E0yX9oDVP99/Af5GW0d0GgQwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bb898da1f01ea996110d61a3ad3ceb7b/a7963/top.webp 257w\"\n              sizes=\"(max-width: 257px) 100vw, 257px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bb898da1f01ea996110d61a3ad3ceb7b/e55ce/top.png 257w\"\n            sizes=\"(max-width: 257px) 100vw, 257px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bb898da1f01ea996110d61a3ad3ceb7b/e55ce/top.png\"\n            alt=\"top\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>この記事は，「<a href=\"https://sititou70.github.io/%E3%80%90Linux%E3%80%91%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%83%93%E3%83%AB%E3%83%89%E3%81%A7%E3%82%82%E9%80%B2%E6%8D%97%E3%81%8C%E8%A6%8B%E3%81%9F%E3%81%84%EF%BC%81/\">カーネルビルドでも進捗が見たい！</a>」に入り切らなかった蛇足です．</p>\n<p><a href=\"https://www.npmjs.com/package/kbuild-progress\">kbuild-progress</a>の実装を初めた当初は，kernelのMakefileを改造することで，プログレスバーを表示しようとしていました．Linux kernelのビルドシステムであるKbuildは<a href=\"https://www.gnu.org/software/make/\">make</a>で書かれています．実際にビルドを行っているmakeなら，ビルド全体のタスク数や，残りのタスク数などを知っているはずだと考えたのです．</p>\n<h2 id=\"makefileを読んでみた\" style=\"position:relative;\"><a href=\"#makefile%E3%82%92%E8%AA%AD%E3%82%93%E3%81%A7%E3%81%BF%E3%81%9F\" aria-label=\"makefileを読んでみた permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Makefileを読んでみた</h2>\n<p>Linux kernelには <strong>63,135行のMakefile</strong> が含まれ（linux-5.6.7で計測）， <em>なまら複雑です．</em> 私はmakeについて全く詳しくないので（予防線），雰囲気で読んでいくしかありません．がんばります．</p>\n<h3 id=\"vmlinux-ルール\" style=\"position:relative;\"><a href=\"#vmlinux-%E3%83%AB%E3%83%BC%E3%83%AB\" aria-label=\"vmlinux ルール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">vmlinux</code> ルール</h3>\n<p>プログレスバーを表示するにあたって，まず，ビルド対象ファイルの一覧的なものがほしいです．もっとも典型的なビルドコマンドである<code class=\"language-text\">make vmlinux</code>の挙動について考えます．<code class=\"language-text\">vmlinux</code>のルールは<code class=\"language-text\">linux-5.6.7/Makefile</code>の</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\"><span class=\"token target symbol\">vmlinux</span><span class=\"token punctuation\">:</span> scripts/link-vmlinux.sh autoksyms_recursive <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>vmlinux-deps<span class=\"token punctuation\">)</span> FORCE\n\t+<span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token function\">call</span> if_changed,link-vmlinux<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ですね．<code class=\"language-text\">vmlinux:</code>がターゲットで，その後に以下のような依存が続いています．</p>\n<ul>\n<li><code class=\"language-text\">scripts/link-vmlinux.sh</code></li>\n<li><code class=\"language-text\">autoksyms_recursive</code></li>\n<li><code class=\"language-text\">$(vmlinux-deps)</code></li>\n<li><code class=\"language-text\">FORCE</code></li>\n</ul>\n<p><code class=\"language-text\">scripts/link-vmlinux.sh</code>は…なんかvmlinuxをリンクするやつですね（雑）．たぶん今回は見なくてもいいでしょう．<code class=\"language-text\">FORCE</code>は，このルールの実行を強制する何かです．これも関係なし．</p>\n<p><code class=\"language-text\">autoksyms_recursive</code>は怪しい名前ですね．ルールを見ると，</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\"><span class=\"token keyword\">ifdef</span> CONFIG_TRIM_UNUSED_KSYMS\n<span class=\"token target symbol\">autoksyms_recursive</span><span class=\"token punctuation\">:</span> ...\n<span class=\"token keyword\">endif</span></code></pre></div>\n<p><code class=\"language-text\">CONFIG_TRIM_UNUSED_KSYMS</code>が宣言されていないときは何もしないそうです．<code class=\"language-text\">CONFIG_TRIM_UNUSED_KSYMS</code>とは？</p>\n<blockquote>\n<p>このオプションにより、未使用のエクスポートされたシンボルをビルドから削除できます。\n<a href=\"https://cateee.net/lkddb/web-lkddb/TRIM_UNUSED_KSYMS.html\">https://cateee.net/lkddb/web-lkddb/TRIM_UNUSED_KSYMS.html</a></p>\n</blockquote>\n<p>なるほど，kernelをダイエットするやつですね．今回は関係ナシ！</p>\n<h3 id=\"vmlinux-deps変数\" style=\"position:relative;\"><a href=\"#vmlinux-deps%E5%A4%89%E6%95%B0\" aria-label=\"vmlinux deps変数 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">vmlinux-deps</code>変数</h3>\n<p>ということで<code class=\"language-text\">$(vmlinux-deps)</code>があやしい．この変数は…</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\">vmlinux-deps <span class=\"token operator\">:=</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>KBUILD_LDS<span class=\"token punctuation\">)</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>KBUILD_VMLINUX_OBJS<span class=\"token punctuation\">)</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>KBUILD_VMLINUX_LIBS<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ここで作られてますね．おお！ビルド対象の一覧っぽい感じがします！さっそく変数の中身を見てみましょう！</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">init/built-in.a\nusr/built-in.a\narch/x86/built-in.a\n...(その他20個のファイル)...</code></pre></div>\n<p>あれ…？なんだか数が少ないですね…トップレベルのオブジェクトファイルしかリストに入っていないようです．じゃあこれらのオブジェクトを生成するルールは…</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\"><span class=\"token comment\"># The actual objects are generated when descending,</span>\n<span class=\"token comment\"># make sure no implicit rule kicks in</span>\n<span class=\"token target symbol\"><span class=\"token variable\">$</span>(sort <span class=\"token variable\">$</span>(vmlinux-deps))</span><span class=\"token punctuation\">:</span> descend <span class=\"token punctuation\">;</span></code></pre></div>\n<p>「実際のオブジェクトは下降時に生成されます」，なるほど．たぶんディレクトリを再帰してビルドしていくんですね．</p>\n<h3 id=\"descend-ルール\" style=\"position:relative;\"><a href=\"#descend-%E3%83%AB%E3%83%BC%E3%83%AB\" aria-label=\"descend ルール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">descend</code> ルール</h3>\n<p>descendのルールは…</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\"><span class=\"token target symbol\">descend</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>build-dirs<span class=\"token punctuation\">)</span>\n<span class=\"token target symbol\"><span class=\"token variable\">$</span>(build-dirs)</span><span class=\"token punctuation\">:</span> prepare\n\t<span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>Q<span class=\"token punctuation\">)</span><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>MAKE<span class=\"token punctuation\">)</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>build<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token variable\">$@</span> \\\n\tsingle-build<span class=\"token operator\">=</span><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token function\">if</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token function\">filter-out</span> <span class=\"token variable\">$@/,</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token function\">filter</span> <span class=\"token variable\">$@/%,</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>single-no-ko<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>,1<span class=\"token punctuation\">)</span> \\\n\tneed-builtin<span class=\"token operator\">=</span>1 need-modorder<span class=\"token operator\">=</span>1</code></pre></div>\n<p>ありました．依存は<code class=\"language-text\">build-dirs</code>で，3行のコマンドがあります．<code class=\"language-text\">build-dirs</code>の中身は…</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">init usr arch/x86 kernel certs mm fs ipc security crypto block drivers sound net lib arch/x86/lib virt</code></pre></div>\n<p>ほーん．トップディレクトリのリストですね．</p>\n<p>コマンドのほうを見てみます．3行ありますが，下2行は変数に何か代入しているだけなので，1行目に注目します．</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\">\t<span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>Q<span class=\"token punctuation\">)</span><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>MAKE<span class=\"token punctuation\">)</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>build<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token variable\">$@</span> \\</code></pre></div>\n<p>いろいろ変数を展開していますね．<code class=\"language-text\">Q</code>と<code class=\"language-text\">MAKE</code>変数の中身をそれぞれ見てみます．</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Q = @\nMAKE = make</code></pre></div>\n<p>なるほど，<code class=\"language-text\">@</code>コマンドはmakeのログを抑制するやつなので，<code class=\"language-text\">Q</code>は静かにしたいときに使う変数です．<code class=\"language-text\">MAKE</code>はまんま<code class=\"language-text\">make</code>ですね．つまり，このコマンドは別のmakeコマンドを実行しています．<code class=\"language-text\">build</code>変数の定義は…？</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\">linux-5.6.7$ grep -r <span class=\"token string\">\"build :=\"</span>\n<span class=\"token target symbol\">scripts/Kbuild.include</span><span class=\"token punctuation\">:</span>build <span class=\"token operator\">:=</span> -f <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>srctree<span class=\"token punctuation\">)</span>/scripts/Makefile.build obj</code></pre></div>\n<p><code class=\"language-text\">linux-5.6.7/scripts/Kbuild.include:build</code>にありました．<code class=\"language-text\">-f $(srctree)/scripts/Makefile.build obj</code>です．つまり先程のコマンドは…</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\">\t<span class=\"token operator\">@</span>make -f <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>srctree<span class=\"token punctuation\">)</span>/scripts/Makefile.build obj<span class=\"token operator\">=</span><span class=\"token variable\">$@</span> \\</code></pre></div>\n<p>となります．makeの<code class=\"language-text\">-f</code>オプションはMakefileを明示的に指定するやつですね．obj変数に<code class=\"language-text\">$@</code>をセットして<code class=\"language-text\">linux-5.6.7/scripts/Makefile.build</code>を実行しています．<code class=\"language-text\">@</code>変数はビルドターゲットを表す特殊な変数で，先程の<code class=\"language-text\">build-dirs</code>変数の中身が入ってきます．つまり</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">make</span> <span class=\"token parameter variable\">-f</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>srctree<span class=\"token variable\">)</span></span>/scripts/Makefile.build <span class=\"token assign-left variable\">obj</span><span class=\"token operator\">=</span>init\n<span class=\"token function\">make</span> <span class=\"token parameter variable\">-f</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>srctree<span class=\"token variable\">)</span></span>/scripts/Makefile.build <span class=\"token assign-left variable\">obj</span><span class=\"token operator\">=</span>usr\n<span class=\"token function\">make</span> <span class=\"token parameter variable\">-f</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>srctree<span class=\"token variable\">)</span></span>/scripts/Makefile.build <span class=\"token assign-left variable\">obj</span><span class=\"token operator\">=</span>arch/x86\n<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">(</span>その他20行のコマンド<span class=\"token punctuation\">)</span><span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>というコマンドが実行されていきます．</p>\n<h3 id=\"scriptsmakefilebuild\" style=\"position:relative;\"><a href=\"#scriptsmakefilebuild\" aria-label=\"scriptsmakefilebuild permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">scripts/Makefile.build</code></h3>\n<p>というわけで，各トップディレクトリの処理は<code class=\"language-text\">scripts/Makefile.build</code>が担当しているようです．このMakefileはどんな処理をしているのでしょうか．ちょっと先頭から読んでみます．</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\">src <span class=\"token operator\">:=</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n...\n<span class=\"token comment\"># Init all relevant variables used in kbuild files so</span>\n<span class=\"token comment\"># 1) they have correct type</span>\n<span class=\"token comment\"># 2) they do not inherit any value from the environment</span>\nobj-y <span class=\"token operator\">:=</span>\nobj-m <span class=\"token operator\">:=</span></code></pre></div>\n<p>おっ，各トップディレクトリが <code class=\"language-text\">obj</code> 変数にセットされていますね．そして，続くコメントでは「kbuildファイルで使用されるすべての関連変数を初期化」…</p>\n<p>kernelやkernel moduleを開発したことのある方なら，<code class=\"language-text\">obj-y</code>や<code class=\"language-text\">obj-m</code>という変数を見てニヤリとするはずです．これらは，Linux kernelに自分の書いたプログラムを登録するときに使う変数ですね．kernelの各ディレクトリには それぞれのMakefileがあり，ビルドしたいファイルをこれらの変数に登録しているのです．</p>\n<p><code class=\"language-text\">obj-y</code>を調べれば，ビルド対象のオブジェクトがリストできるかも！</p>\n<h3 id=\"obj-y\" style=\"position:relative;\"><a href=\"#obj-y\" aria-label=\"obj y permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">obj-y</code></h3>\n<p>では<code class=\"language-text\">obj-y</code>はどのように利用されているのでしょうか．<code class=\"language-text\">Makefile.build</code>の中にはそれらしいヤツがなかったのですが，</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">linux-5.6.7$ <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-r</span> <span class=\"token string\">\"obj-y\"</span>\n<span class=\"token punctuation\">..</span>.\nscripts/Makefile.lib:real-obj-y :<span class=\"token operator\">=</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>foreach m, <span class=\"token punctuation\">$(</span>obj-y<span class=\"token punctuation\">)</span>, <span class=\"token punctuation\">$(</span>if <span class=\"token punctuation\">$(</span>strip <span class=\"token punctuation\">$(</span><span class=\"token punctuation\">$(</span>m:.o<span class=\"token operator\">=</span>-objs<span class=\"token punctuation\">)</span><span class=\"token variable\">)</span></span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token variable\">$(</span>m:.o<span class=\"token operator\">=</span>-y<span class=\"token punctuation\">)</span><span class=\"token variable\">)</span></span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token variable\">$(</span>m:.o<span class=\"token operator\">=</span>-<span class=\"token punctuation\">)</span><span class=\"token variable\">)</span></span><span class=\"token punctuation\">)</span>,<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token variable\">$(</span>m:.o<span class=\"token operator\">=</span>-objs<span class=\"token punctuation\">)</span><span class=\"token variable\">)</span></span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token variable\">$(</span>m:.o<span class=\"token operator\">=</span>-y<span class=\"token punctuation\">)</span><span class=\"token variable\">)</span></span>,<span class=\"token variable\"><span class=\"token variable\">$(</span>m<span class=\"token variable\">)</span></span><span class=\"token punctuation\">))</span></code></pre></div>\n<p><code class=\"language-text\">scripts/Makefile.lib</code>に，ぽいのがありました．<code class=\"language-text\">obj</code>が<code class=\"language-text\">arch/x86</code>の時の<code class=\"language-text\">real-obj-y</code>を覗いてみましょう．</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">arch/x86/entry/built-in.a\narch/x86/events/built-in.a\narch/x86/realmode/built-in.a\narch/x86/kernel/built-in.a\narch/x86/mm/built-in.a\narch/x86/crypto/built-in.a\narch/x86/ia32/built-in.a\narch/x86/platform/built-in.a\narch/x86/net/built-in.a</code></pre></div>\n<p>お！ビルド対象のオブジェクトですね！でも数が少ない…</p>\n<p>kbuildにおいて<code class=\"language-text\">built-in.a</code>は，各ディレクトリのオブジェクトファイルをまとめたやつです．今回は，<code class=\"language-text\">arch/x86</code>の，各サブディレクトリの<code class=\"language-text\">built-in.a</code>しかリストされていません．各サブディレクトリのビルドは誰がやるのでしょうか…？</p>\n<h3 id=\"再帰処理\" style=\"position:relative;\"><a href=\"#%E5%86%8D%E5%B8%B0%E5%87%A6%E7%90%86\" aria-label=\"再帰処理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>再帰処理</h3>\n<p><strong>完全に勘</strong> ですが，<code class=\"language-text\">Makefile.build</code>は再帰的に呼び出されるのでしょう．試しに「build」とかで<code class=\"language-text\">Makefile.build</code>を検索してみると…</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\"><span class=\"token comment\"># Descending</span>\n<span class=\"token comment\"># ---------------------------------------------------------------------------</span>\n\nPHONY <span class=\"token operator\">+=</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>subdir-ym<span class=\"token punctuation\">)</span>\n<span class=\"token target symbol\"><span class=\"token variable\">$</span>(subdir-ym)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>Q<span class=\"token punctuation\">)</span><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>MAKE<span class=\"token punctuation\">)</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>build<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token variable\">$@</span> \\</code></pre></div>\n<p><em>ほらでた．</em> <code class=\"language-text\">subdir-ym</code>とか，名前からして再帰処理関係です．<code class=\"language-text\">obj</code>が<code class=\"language-text\">arch/x86</code>のときの<code class=\"language-text\">subdir-ym</code>の中身を見てみると，</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">arch/x86/crypto arch/x86/entry arch/x86/events arch/x86/ia32 arch/x86/kernel arch/x86/mm arch/x86/net arch/x86/platform arch/x86/realmode</code></pre></div>\n<p>あーね．<code class=\"language-text\">arch/x86</code>のサブディレクトリでしょう．念のため，<code class=\"language-text\">arch/x86</code>以下のディレクトリを確認します．</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">linux-5.6.7/arch/x86$ <span class=\"token function\">find</span> <span class=\"token builtin class-name\">.</span> <span class=\"token parameter variable\">-type</span> f\n./crypto\n<span class=\"token punctuation\">..</span>.\n./events\n<span class=\"token punctuation\">..</span>.\n./entry\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>うん，ありますね．<code class=\"language-text\">subdir-ym</code>は1つ下のディレクトリのリストです．そして，それらに対して自分自身を呼び出していますね．どうやら<code class=\"language-text\">Makefile.build</code>は，各ディレクトリに対して呼び出され，そこの<code class=\"language-text\">obj-y</code>や<code class=\"language-text\">obj-m</code>をビルドしていくということで間違い無さそうです．</p>\n<h3 id=\"結局\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E5%B1%80\" aria-label=\"結局 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結局…</h3>\n<p>薄々勘づいていたのですが， <strong>ビルド対象ファイルの一覧など，どこにもありません．</strong> 各ディレクトリのビルド対象ファイルを，各ディレクトリに対して呼び出された<code class=\"language-text\">Makefile.build</code>が知っているだけで， <strong>だれも全体を把握していないのです…</strong></p>\n<p>Makefileを改造するのは筋が悪いということで，方針を考え直した結果，<a href=\"https://sititou70.github.io/%E3%80%90Linux%E3%80%91%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%83%93%E3%83%AB%E3%83%89%E3%81%A7%E3%82%82%E9%80%B2%E6%8D%97%E3%81%8C%E8%A6%8B%E3%81%9F%E3%81%84%EF%BC%81/\">makeをdry-runするという方法を思いつきました．</a></p>\n<h3 id=\"他に調べたこと\" style=\"position:relative;\"><a href=\"#%E4%BB%96%E3%81%AB%E8%AA%BF%E3%81%B9%E3%81%9F%E3%81%93%E3%81%A8\" aria-label=\"他に調べたこと permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>他に調べたこと</h3>\n<h4 id=\"stackoverflow\" style=\"position:relative;\"><a href=\"#stackoverflow\" aria-label=\"stackoverflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>stackoverflow</h4>\n<p>こんな質問を見つけました</p>\n<blockquote>\n<h2 id=\"kernel-compilation-progress-closed\" style=\"position:relative;\"><a href=\"#kernel-compilation-progress-closed\" aria-label=\"kernel compilation progress closed permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kernel compilation progress [closed]</h2>\n<p>linux kernelのコンパイルの進捗を表示したいんだけど，なんかいい方法ない？\n<a href=\"https://stackoverflow.com/questions/12251949/kernel-compilation-progress\">https://stackoverflow.com/questions/12251949/kernel-compilation-progress</a></p>\n</blockquote>\n<p>これに対して，「Makefileを改造すれば？」的な返信がありますが，まぁ面倒ですよね．みんな困ってるんすね〜．</p>\n<h4 id=\"help-make\" style=\"position:relative;\"><a href=\"#help-make\" aria-label=\"help make permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>help-make</h4>\n<p><a href=\"https://lists.gnu.org/mailman/listinfo/help-make\">help-make</a>のメーリングリストに，似たようなことをやろうとしている人がいました．</p>\n<blockquote>\n<h2 id=\"monitoring-make-progression\" style=\"position:relative;\"><a href=\"#monitoring-make-progression\" aria-label=\"monitoring make progression permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitoring make progression</h2>\n<p>makeの進行状況を監視する方法はありますか？</p>\n<p><a href=\"https://lists.gnu.org/archive/html/help-make/2006-09/msg00025.html\">https://lists.gnu.org/archive/html/help-make/2006-09/msg00025.html</a></p>\n</blockquote>\n<p>に対しての返信では，</p>\n<blockquote>\n<h2 id=\"re-monitoring-make-progression\" style=\"position:relative;\"><a href=\"#re-monitoring-make-progression\" aria-label=\"re monitoring make progression permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Re: Monitoring make progression</h2>\n<p>問題は，いくつのステップが実行されるかを知らないことです．Makeは，実行される可能性のあるステップの合計数さえ知りません．</p>\n</blockquote>\n<p>そうそう．</p>\n<blockquote>\n<p>最初に「make -n」を使用して，makeにステップを生成させる人のことを聞いたことがあります．それらを実行することで，ステップをカウントし，実際のmakeを実行します．</p>\n</blockquote>\n<p>お！私と同じアプローチですね！</p>\n<blockquote>\n<p>ただし，この方法結構不安定です．Makefileによっては，全てのルールが出力されない場合がありますし，出力されたルールが実際には実行されない場合もあります．また，プロジェクトによっては，ドライランは非常に重いでしょう．<br>\nでも，ドライランが今のところ最良の方法です．</p>\n<p><a href=\"https://lists.gnu.org/archive/html/help-make/2006-09/msg00026.html\">https://lists.gnu.org/archive/html/help-make/2006-09/msg00026.html</a></p>\n</blockquote>\n<p>はー，そうなんですね．makeは奥が深そうです．</p>\n<h4 id=\"golem\" style=\"position:relative;\"><a href=\"#golem\" aria-label=\"golem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GOLEM</h4>\n<p>先程のメーリングリストによれば，makeのドライランは決して完璧な方法ではないようです．</p>\n<p><a href=\"https://www4.cs.fau.de/Publications/2012/dietrich_12_splc.pdf\">A Robust Approach for Variability Extraction from the Linux Build System</a>によれば，Linux kernelのMakefileを解析する<a href=\"https://i4gerrit.informatik.uni-erlangen.de/admin/repos/undertaker\">GOLEM</a>というツールを開発したそうです（GOLEMは，リンク先のundertakerというツールのサブセットです）．</p>\n<p>これを使えばより確実にビルド対象ファイルをリストできると考えたのですが，私の環境ではGOLEMがうまく動きませんでした．ツールの使い方が悪いだけかも知れませんが…</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>結局，Makefileをここまで読む必要はなかったのですが，まぁためになったのでよしです．</p>\n<p>あーつかれた</p>","frontmatter":{"title":"Linux kernelのMakefileを雰囲気で読んだ話","date":"2020/04/28"},"fields":{"slug":"/Linux-kernelのMakefileを雰囲気で読んだ話/"},"id":"50d3cc2a-de7a-5b9a-a8d8-754415fe4d94"},"firstImage":{"imageFile":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/bb898da1f01ea996110d61a3ad3ceb7b/c32b4/top.png","srcSet":"/static/bb898da1f01ea996110d61a3ad3ceb7b/537c7/top.png 64w,\n/static/bb898da1f01ea996110d61a3ad3ceb7b/e7846/top.png 129w,\n/static/bb898da1f01ea996110d61a3ad3ceb7b/c32b4/top.png 257w","sizes":"(min-width: 257px) 257px, 100vw"},"sources":[{"srcSet":"/static/bb898da1f01ea996110d61a3ad3ceb7b/53754/top.webp 64w,\n/static/bb898da1f01ea996110d61a3ad3ceb7b/c3df2/top.webp 129w,\n/static/bb898da1f01ea996110d61a3ad3ceb7b/5f0cf/top.webp 257w","type":"image/webp","sizes":"(min-width: 257px) 257px, 100vw"}]},"width":257,"height":311}}}},"relatedMarkdownRemarks":{"posts":[{"id":"49cf25c1-03f6-575e-8c2f-638ccd6198ea","frontmatter":{"draft":null}},{"id":"5dba01b8-593d-5295-b135-16df1c6295e5","frontmatter":{"draft":null}},{"id":"73d6ab42-b3e6-5663-a175-b1f3d69c29e1","frontmatter":{"draft":null}},{"id":"84bf9a79-dd68-55d1-a1b3-60ffd3784554","frontmatter":{"draft":null}},{"id":"f49ce388-e81c-5425-af59-9902f125c20f","frontmatter":{"draft":null}},{"id":"c6def021-b8da-5dbe-ad3e-811d9286424d","frontmatter":{"draft":true}},{"id":"3b696b96-130d-50de-a673-dc1367f32387","frontmatter":{"draft":null}},{"id":"0c5568c9-6d87-56ed-ab0e-caeb9c1aafa4","frontmatter":{"draft":null}},{"id":"7d6499d9-277c-5f07-b8b1-98ae40c50c42","frontmatter":{"draft":null}},{"id":"8f7b1b24-7738-5b97-bfb6-fd763f11a664","frontmatter":{"draft":true}},{"id":"75696ec6-74a3-5046-8a3c-f39b36d92311","frontmatter":{"draft":null}},{"id":"89ddbcc0-ed71-5a69-9d55-9677eab3e6cf","frontmatter":{"draft":null}},{"id":"4efc4f86-56aa-5ff4-8994-3946583906ad","frontmatter":{"draft":null}},{"id":"73ab4455-f04d-5320-bf3a-90b9f7441d13","frontmatter":{"draft":null}},{"id":"be594923-185e-5cca-95b6-5267b3c9fc8c","frontmatter":{"draft":null}},{"id":"a190aac4-0483-5e02-b1d3-261f3b5f313a","frontmatter":{"draft":null}},{"id":"c2249b7b-b97e-5cf4-8ea9-8024e96851b7","frontmatter":{"draft":true}},{"id":"48c65a15-67ca-57d0-9edc-ebcb868f7ad2","frontmatter":{"draft":true}},{"id":"e376b2d4-df91-5b82-af7a-a8d02763e922","frontmatter":{"draft":true}},{"id":"c7a5adfb-149b-5469-ba35-7421e2101951","frontmatter":{"draft":null}},{"id":"7d79eb4b-cd4a-5621-a67a-91d9a24dce05","frontmatter":{"draft":null}},{"id":"3c14921d-1ba3-5a7a-93a2-757f3a03ee3a","frontmatter":{"draft":null}},{"id":"2cfd9e33-b4e1-53e4-884d-d8a6760f3387","frontmatter":{"draft":true}},{"id":"4ed3b747-2001-54f4-9661-3acab89ce275","frontmatter":{"draft":null}},{"id":"e83330dc-2312-5ae6-95fa-53e86909f42b","frontmatter":{"draft":true}},{"id":"ebae7878-c4ee-505e-81e2-3d3fc47ea826","frontmatter":{"draft":true}},{"id":"871ac696-39ea-5c64-94f3-5dc4b73b5770","frontmatter":{"draft":true}},{"id":"eba9aa6a-6e21-5f1b-a0eb-7b6bfb1e04f1","frontmatter":{"draft":null}},{"id":"4edc1b46-b395-5783-af6a-818b8fc9c2dc","frontmatter":{"draft":null}},{"id":"1162dccb-e1bf-576d-a5c6-0993394feb0a","frontmatter":{"draft":true}},{"id":"0116f663-28d1-507a-b5ab-b189801dd408","frontmatter":{"draft":true}},{"id":"01deffb8-0d62-54c6-9e41-20832cbc3c6e","frontmatter":{"draft":null}},{"id":"067a602f-4581-5707-b896-73190dd8c889","frontmatter":{"draft":null}},{"id":"1086a735-7173-58cc-a813-c540a563aedf","frontmatter":{"draft":false}},{"id":"12222bfa-2e8e-51ee-99d8-8a19902351f5","frontmatter":{"draft":null}},{"id":"1509de3c-7308-5e40-a885-f5ebdb089774","frontmatter":{"draft":null}},{"id":"27f10a38-0ecb-539f-a717-7e40a41bbd10","frontmatter":{"draft":null}},{"id":"29b79017-f96d-5b04-8d01-5b8ee761ebed","frontmatter":{"draft":null}},{"id":"2f30c3f1-0d66-590b-8dba-7836df701d46","frontmatter":{"draft":null}},{"id":"3908aafc-c8d3-5c67-821f-0866592449f2","frontmatter":{"draft":true}},{"id":"3a3c4125-9986-53bb-8b96-ae29936c96ab","frontmatter":{"draft":null}},{"id":"3d71b3f9-8d6b-58a4-b6cb-8293daf99d74","frontmatter":{"draft":null}},{"id":"46a22c41-5455-557c-85d4-973a6e2220ee","frontmatter":{"draft":null}},{"id":"4d43646f-8aa6-52b6-b0b6-5160f0be2b05","frontmatter":{"draft":null}},{"id":"50951bb1-eb92-5663-a3d8-8f35f73a1322","frontmatter":{"draft":null}},{"id":"5888c50d-8414-5e8f-b0dc-28a31b29053d","frontmatter":{"draft":null}},{"id":"63f3c7ad-6c59-52b5-9816-78fd348955ff","frontmatter":{"draft":true}},{"id":"69a4aa90-b728-522c-b34f-abee49825c45","frontmatter":{"draft":true}},{"id":"75550af2-8134-5467-a07d-abbb5a4f6b7c","frontmatter":{"draft":true}},{"id":"7778d041-a5bf-536a-a36f-c0dbc5e08ac7","frontmatter":{"draft":true}},{"id":"78349b16-6e41-5fef-ae38-bcdc5ff297ef","frontmatter":{"draft":true}},{"id":"7a8fc278-a847-5b68-8b74-a83193ba3f55","frontmatter":{"draft":null}},{"id":"82d43655-ea2a-52cd-97a3-16b7b28ad150","frontmatter":{"draft":null}},{"id":"8b3e46c2-1a1e-5af0-8900-7972c7285d15","frontmatter":{"draft":null}},{"id":"961ec1e6-3f2b-59d9-a33f-dad76cf67f47","frontmatter":{"draft":null}},{"id":"97f01467-e3a1-58e1-b2a4-db77354cc1a3","frontmatter":{"draft":null}},{"id":"9f02de74-61a0-5daf-a048-1c1022e08fe4","frontmatter":{"draft":null}},{"id":"9f24363b-ee3e-54bf-8a18-46ea3b269bea","frontmatter":{"draft":null}},{"id":"a091877c-69b8-59f9-8963-1af334fd573c","frontmatter":{"draft":null}},{"id":"a6c64123-b824-5224-8027-90eb12040396","frontmatter":{"draft":null}},{"id":"b4251348-b618-5b5b-a2c8-e4c6b2431b83","frontmatter":{"draft":true}},{"id":"bfee69af-7d7f-5d87-9680-d2e9b60f8416","frontmatter":{"draft":null}},{"id":"c2db052c-95c6-5094-935b-9eb39f5c762a","frontmatter":{"draft":null}},{"id":"c5e2431a-cf05-5024-b833-e1c69f680d44","frontmatter":{"draft":null}},{"id":"cbdf3192-973c-5d87-9cf1-bb9110e9a169","frontmatter":{"draft":null}},{"id":"d29b4513-0609-5cfc-af49-817467dbed1f","frontmatter":{"draft":null}},{"id":"d4d1afa4-f2f9-5942-ae36-2826fb938af5","frontmatter":{"draft":null}},{"id":"db26c6b9-37b4-5cc4-b1ec-c61dc667863e","frontmatter":{"draft":null}},{"id":"dd0c41cf-0a03-5b89-b5a2-f64859aeae63","frontmatter":{"draft":null}},{"id":"e322eac2-bd89-5347-b20d-d050d303a6be","frontmatter":{"draft":null}},{"id":"e4fb8478-b1ad-59eb-95e8-8c5e0500d3f4","frontmatter":{"draft":true}},{"id":"ed7af7f9-75f5-59be-9063-de564576eed7","frontmatter":{"draft":true}},{"id":"f06a6ae0-e961-504c-8dab-a60489c0557a","frontmatter":{"draft":true}},{"id":"f5a25ce1-67a6-51b2-9bf1-f9fbacb41ad1","frontmatter":{"draft":true}},{"id":"f920a8a8-f5fe-57c9-8792-95c93d2b74eb","frontmatter":{"draft":null}},{"id":"fc7ce496-d3b3-5f39-a04e-8e2dfb960626","frontmatter":{"draft":null}},{"id":"fd6eab68-17d3-5395-8b2b-54a6efe43ebb","frontmatter":{"draft":null}}]}},"pageContext":{"id":"50d3cc2a-de7a-5b9a-a8d8-754415fe4d94"}},"staticQueryHashes":["1530353647","2576926420","63159454"],"slicesMap":{}}